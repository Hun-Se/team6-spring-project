<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper-Comment">

	<!-- 댓글 쓰기 -->
	<insert id="createComment" parameterType="Object">
		insert into
		comment(content, post_post_no, user_user_no)
		values(#{content},
		#{postNo}, #{userNo})
	</insert>


	<!--댓글 가져오기 -->
	<select id="getCommentListByPostNo" parameterType="int"
		resultType="lx.team6.vo.CommentVo">
		SELECT
		c.comment_no commentNo,
		c.content content,
		c.post_post_no postNo,
		c.user_user_no userNo,
		c.created_at createdAt,
		u.id userId,
		u.name userName,
		u.img img

		FROM
		comment c
		JOIN
		post p ON c.post_post_no = p.post_no
		JOIN
		user u ON c.user_user_no = u.user_no
		WHERE
		p.post_no = #{postNo}
		ORDER BY
		c.created_at DESC

	</select>


	<!-- 삭제 -->
	<delete id="deleteComment" parameterType="int">
		delete from comment
		where comment_no = #{commentNo}
	</delete>


</mapper>